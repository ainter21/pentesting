# Scanning Tools

typically we scan in TCP, but also UDP is important. 

## TCP

- Connennection oriented
- has a handshake
- used n applications requiring high reliability
- examples: http, ftp, telnet

## UDP

- connectionless
- no handshake
- used on applications requiring a fast connection
- examples: DNS, DHCP, SNMP

## three way handshake

syn packet to ask for connection, syn-ack packet to permit the connection and to say the port is open and ack packet to confirm the reception of the message. Then a `Client Hello` packet is sent to the server, to fully enstablish the connection

## nmap

By default nmap runs stealth scan: SYN, SYN ACK, RST. It is no longer stealthy, but it is used to find open ports. The flag is `-sS`

- `nmap -sn 192.168.1.0/24`: sweep network, sending ping to see if they are up.
- `nmap -T4 192.168.1.1`: `-T4` define the speed to run nmap. Ports are not defined so it will scan the first 1000 ports.
- Method for Hacke the box
  - `nmap -T4 -A -p- 192.168.1.1`: `-A`  stands for all (OS detection, version detection, script scanning and traceroute). As much info as possible. `-p-` scans all the ports in TCP.
- `nmap -sU -T4 192.168.1.1` for scanning UDP. You cannot trust an UDP scan, there are a lot of false positive.
- `ls /usr/share/nmap/scripts/`: list of scripts
  - `nmap -p 443 --script=all`
  - `nmap -p 443 --script=ssl-enum-cipher domain`: looks all the ciphers and the least strength cipher level.

## Nessus
- download from the site and get the activation code
- `dpkg -i ...`
- register and wait
- `etc/init.d/nessusd start`
- `https://kali:8834`

## Metasploit console

- `msfconsole`
- enumeration, exploitation
- `search portscan`: different scanner
  - auxiliary/scanner/...
- `use module`
  - `info`: description and basic options
  - `options`: list of option already set and options you need to set
    - RHOSTS: remote host
    - `set ports 1-65535`
    - `set rhosts 192.168.1.1`
  - `run
- `exit` 

## Nikto

- `nikto -h https://tesla.com`


## Burp suite

- you need to set the server proxy
  - firefox network proxy
  - manual proxy configuration
  - HTTP proxy 127.0.0.1:8080 for all protocols
- foxy proxy



